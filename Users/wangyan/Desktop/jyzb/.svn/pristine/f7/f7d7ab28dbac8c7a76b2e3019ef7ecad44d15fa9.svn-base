<template>
  <el-drawer :visible.sync="dialogFormVisible" :size="variables.drawWidth" @close="close" modal-append-to-body>
    <span slot="title" class="drawer-title"><b>入库单详情</b></span>
    <moduleTitle title="基本信息"></moduleTitle>
    <el-descriptions :column="2" border style="padding: 16px;">
      <el-descriptions-item label="入库单号">{{ detailInfo.enter_no }}</el-descriptions-item>
      <el-descriptions-item label="入库单名称">{{ detailInfo.enter_name }}</el-descriptions-item>
      <el-descriptions-item label="供应商">{{ detailInfo.supplier_name }}</el-descriptions-item>
      <el-descriptions-item label="入库时间">{{ detailInfo.enter_time }}</el-descriptions-item>
    </el-descriptions>
    <moduleTitle title="入库明细"></moduleTitle>
    <div style="padding: 16px;">
      <el-table :data="detailInfo.enterDetails" stripe border fit height="calc(100vh - 290px)" highlight-current-row>
        <el-table-column label="序号" width="60" type="index" align="center"></el-table-column>
        <el-table-column label="装备类型" width="200" prop="equip_type_name" align="center" show-overflow-tooltip></el-table-column>
        <el-table-column label="装备名称" prop="equip_name_desc" align="center" show-overflow-tooltip></el-table-column>
        <el-table-column label="装备编码" prop="assets_type_code" align="center"></el-table-column>
        <el-table-column label="规格型号" width="150" prop="equip_model" align="center"></el-table-column>
        <el-table-column label="数量" prop="equip_num" align="center" show-overflow-tooltip></el-table-column>
        <el-table-column label="生产日期" prop="produce_date" align="center" show-overflow-tooltip></el-table-column>
        <el-table-column label="保质年限(月)" prop="use_year" align="center" show-overflow-tooltip></el-table-column>
        <!-- <el-table-column label="单价" width="150" prop="unit_price" align="center"></el-table-column> -->
        <el-table-column label="归属对象" align="center" show-overflow-tooltip>
          <template #default="{row}">
            {{ row.use_dept_name||row.warehouse_name }}
          </template>
        </el-table-column>
      </el-table>
    </div>
  </el-drawer>
</template>

<script>
import variables from '@/styles/variables.scss'
import {inOrderDetail} from '@/api/inventory'
export default {
  name: 'detail',
  data() {
    return {
      dialogFormVisible:false,
      detailInfo:{
        enterDetails:[]
      },
    }
  },
  computed: {
    variables() {
      return variables
    },
  },
  methods: {
    showView(id) {
      inOrderDetail({id}).then(res=>{
        this.dialogFormVisible = true;
        this.$nextTick(()=>{
          this.detailInfo = res.data;
        })
      })
    },
    close() {
      this.dialogFormVisible = false;
    }
  },
}
</script>
<style scoped lang="scss">
::v-deep {
  .el-drawer__header {
    padding: 10px !important;
    margin-bottom: 0px;
    border-bottom: 1px solid #d1d9e1;
  }
}
</style>
